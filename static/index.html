<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wenning</title>
    <link rel="stylesheet" href="/static/css/style.css?v=20251217-clearshadow">
    <!-- Driver.js for Product Tour (Êú¨Âú∞Êñá‰ª∂) -->
    <link rel="stylesheet" href="/static/vendor/driver.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-container">
                <img src="/static/logo.png" alt="Wenning" class="logo">
            </div>

            <!-- Showcase Buttons -->
            <div class="showcase-buttons" id="showcase-buttons">
                <!-- Âä®ÊÄÅÂä†ËΩΩshowcaseÊåâÈíÆ -->
            </div>

            <div class="model-selector">
                <label for="model-select">Model</label>
                <select id="model-select">
                    <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                </select>
                <button id="theme-toggle" class="theme-toggle" title="Toggle Theme">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
                    </svg>
                </button>
                <button id="help-tour-btn" class="theme-toggle" title="Â∏ÆÂä©ÂØºËßà">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                        <path d="M12 17h.01"/>
                    </svg>
                </button>
                <button id="feedback-btn" class="feedback-btn" title="Feedback">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                    </svg>
                </button>
                <div class="account" id="account">
                    <button id="account-btn" class="account-btn" title="Account">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                    </button>
                    <div id="account-menu" class="account-menu" style="display:none;">
                        <div class="account-row" id="account-username">Not signed in</div>
                        <button id="logout-btn" class="account-logout">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Showcase Modal -->
    <div class="showcase-modal" id="showcase-modal">
        <div class="showcase-modal-overlay" id="showcase-modal-overlay"></div>
        <div class="showcase-modal-content">
            <button class="showcase-modal-close" id="showcase-modal-close">‚úï</button>
            <div class="showcase-modal-body">
                <!-- Left: Prompt Card -->
                <div class="showcase-prompt-section">
                    <div class="showcase-prompt-header">
                        <h3 id="showcase-case-title">Á§∫‰æãÊ†áÈ¢ò</h3>
                        <p id="showcase-case-description">Á§∫‰æãÊèèËø∞</p>
                    </div>
                    <div class="showcase-prompt-card">
                        <div class="showcase-prompt-toolbar">
                            <span class="showcase-prompt-label">Prompt</span>
                            <div class="showcase-prompt-actions">
                                <button class="showcase-btn showcase-btn-secondary" id="showcase-copy-btn">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                                    Â§çÂà∂
                                </button>
                                <button class="showcase-btn showcase-btn-primary" id="showcase-try-btn">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>
                                    ËØïËØï
                                </button>
                            </div>
                        </div>
                        <pre class="showcase-prompt-content" id="showcase-prompt-content"></pre>
                    </div>
                </div>
                <!-- Right: Preview Section -->
                <div class="showcase-preview-section">
                    <div class="showcase-preview-header">
                        <h3>‰∫§‰ªòÁâ©È¢ÑËßà</h3>
                    </div>
                    <div class="showcase-preview-container" id="showcase-preview-container">
                        <div class="showcase-preview-placeholder">Âä†ËΩΩ‰∏≠...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container center-mode">
        <!-- Conversations Sidebar (Left) -->
        <div class="conversations-sidebar" id="conversations-sidebar">
            <div class="conversations-header">
                <button id="new-conversation-btn" class="new-conversation-entry" title="New Chat" aria-label="New Chat">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <rect x="3" y="3" width="18" height="18" rx="3" stroke="currentColor" stroke-width="1.8"/>
                        <path d="M14.8 7.6l1.6 1.6M10 16l-2.7.6.6-2.7 6.2-6.2 2.1 2.1L10 16z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                    </svg>
                    <span class="new-conversation-text">New Chat</span>
                </button>
            </div>
            <!-- Workspace Panel -->
            <div class="workspace-panel">
                <div class="workspace-header" id="workspace-header">Workspace</div>
                <div class="workspace-list" id="workspace-list">
                    <div class="workspace-empty">No files yet. Generated files will appear here.</div>
                </div>
            </div>

            <!-- History quick entry -->
            <div class="sidebar-footer">
                <button id="history-toggle" class="history-toggle">History</button>
            </div>

            <!-- History overlay -->
            <div class="history-overlay" id="history-overlay">
                <div class="history-header">
                    <div>History</div>
                    <button id="history-close" class="history-close">‚úï</button>
                </div>
                <div class="conversations-list" id="conversations-list"></div>
            </div>
        </div>

        <!-- Splitter: Left <-> Middle -->
        <div class="v-splitter" id="splitter-left" title="ÊãñÊãΩË∞ÉÊï¥ÂÆΩÂ∫¶"></div>

        <!-- Chat Panel (Middle) -->
        <div class="chat-panel" id="chat-panel">
            <!-- Messages Area -->
            <div class="chat-messages" id="chat-messages">
                <!-- Ê∂àÊÅØÂ∞ÜÂä®ÊÄÅÊ∑ªÂä†Âà∞ËøôÈáå -->
            </div>

            <!-- Input Area -->
            <div class="chat-input-container">
                <!-- Welcome Message (shown when chat is empty) -->
                <div class="welcome-message" id="welcome-message" style="display:none;">
                    <span class="welcome-username" id="welcome-username">User</span>Ôºå‰Ω†Â•Ω
                </div>
                <!-- Input and Send Button -->
                <div class="input-row">
                    <div class="chat-input-box">
                        <textarea
                            id="chat-input"
                            class="chat-input has-addon"
                            placeholder="Type your message..."
                            rows="3"
                        ></textarea>
                        <div class="add-file-wrapper inside">
                            <input type="file" id="attach-input" multiple style="display:none" />
                            <button id="attach-btn" class="add-btn inside" type="button" aria-label="Attach Files">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </button>
                            <span class="tooltip" role="tooltip">Attach Files</span>
                        </div>
                        <div class="attachments-strip" id="attachments-strip"></div>
                    </div>
                    <button id="send-btn" class="send-btn">Send</button>
                    <button id="stop-btn" class="stop-btn" style="display:none" title="Stop Current Run">Stop</button>
                </div>
                <!-- Context Indicator -->
                <div class="context-indicator-bottom">
                    <span class="context-text" id="context-text">Context left until auto-compact: 100%</span>
                </div>
            </div>
        </div>

        <!-- Splitter: Middle <-> Right -->
        <div class="v-splitter" id="splitter-right" title="ÊãñÊãΩË∞ÉÊï¥ÂÆΩÂ∫¶"></div>

        <!-- Preview Panel (Right) -->
        <div class="preview-panel" id="preview-panel">

            <!-- File Tabs -->
            <div class="file-tabs-container" id="file-tabs-container">
                <ul class="file-tabs" id="file-tabs">
                    <!-- Êñá‰ª∂Ê†áÁ≠æÂä®ÊÄÅÁîüÊàê -->
                </ul>
            </div>

            <!-- Inner Splitter: File list <-> Content -->
            <div class="v-splitter" id="splitter-preview" title="ÊãñÊãΩË∞ÉÊï¥Êñá‰ª∂ÂàóË°®ÂÆΩÂ∫¶"></div>

            <!-- File Contents -->
            <div class="file-contents-container" id="file-contents-container">
                <div class="preview-content" id="preview-content">
                    <p class="preview-placeholder">Waiting for files...</p>
                </div>
            </div>
        </div>

    </div>

    <!-- Auth Modal -->
    <div class="auth-overlay" id="auth-overlay" style="display:none;">
        <div class="auth-modal">
            <div class="auth-title">Sign In</div>
            <div class="auth-field">
                <label>Username</label>
                <input type="text" id="auth-username" placeholder="Enter username" />
            </div>
            <div class="auth-field">
                <label>Password</label>
                <input type="password" id="auth-password" placeholder="Enter password" />
            </div>
            <div class="auth-error" id="auth-error"></div>
            <div class="auth-actions">
                <button id="auth-login-btn" class="primary">Sign In</button>
                <button id="auth-register-btn" class="secondary">Create Account</button>
            </div>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div class="feedback-overlay" id="feedback-overlay" style="display:none;">
        <div class="feedback-modal">
            <button class="feedback-close" id="feedback-close">‚úï</button>
            <div class="feedback-title">üí¨ Áî®Êà∑ÂèçÈ¶à</div>
            <div class="feedback-subtitle">ÂëäËØâÊàë‰ª¨ÊÇ®ÁöÑÈúÄÊ±ÇÂíåÂª∫ËÆÆ</div>

            <div class="feedback-field">
                <label>ÂèçÈ¶àÁ±ªÂûã <span class="required">*</span></label>
                <select id="feedback-type">
                    <option value="">ËØ∑ÈÄâÊã©...</option>
                    <option value="feature">ÂäüËÉΩÈúÄÊ±Ç</option>
                    <option value="bug">ÈóÆÈ¢òÊä•Âëä</option>
                    <option value="improvement">ÊîπËøõÂª∫ËÆÆ</option>
                    <option value="other">ÂÖ∂‰ªñ</option>
                </select>
            </div>

            <div class="feedback-field">
                <label>ËØ¶ÁªÜÊèèËø∞ <span class="required">*</span></label>
                <textarea id="feedback-content"
                          placeholder="ËØ∑ËØ¶ÁªÜÊèèËø∞ÊÇ®ÁöÑÈúÄÊ±ÇÊàñÈÅáÂà∞ÁöÑÈóÆÈ¢ò..."
                          rows="6"></textarea>
            </div>

            <div class="feedback-field">
                <label>ËÅîÁ≥ªÊñπÂºèÔºàÂèØÈÄâÔºâ</label>
                <input type="text"
                       id="feedback-contact"
                       placeholder="ÈÇÆÁÆ±ÊàñÂÖ∂‰ªñËÅîÁ≥ªÊñπÂºèÔºà‰ª•‰æøÊàë‰ª¨Ë∑üËøõÔºâ" />
            </div>

            <div class="feedback-success" id="feedback-success" style="display:none;">
                ‚úì ÊÑüË∞¢ÊÇ®ÁöÑÂèçÈ¶àÔºÅÊàë‰ª¨‰ºöËÆ§ÁúüÂ§ÑÁêÜÊÇ®ÁöÑÊÑèËßÅ„ÄÇ
            </div>
            <div class="feedback-error" id="feedback-error" style="display:none;"></div>

            <div class="feedback-actions">
                <button id="feedback-submit-btn" class="primary">Êèê‰∫§ÂèçÈ¶à</button>
                <button id="feedback-cancel-btn" class="secondary">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <!-- Markdown Renderer -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- SheetJS for Excel Preview -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>

    <!-- docx-preview for Word Preview -->
    <script src="https://cdn.jsdelivr.net/npm/docx-preview@0.3.0/dist/docx-preview.min.js"></script>

    <!-- Driver.js for Product Tour (Êú¨Âú∞Êñá‰ª∂) -->
    <script src="/static/vendor/driver.iife.js"></script>

    <!-- Scripts -->
    <script src="/static/js/sse.js?v=20251212-fix"></script>
    <script src="/static/js/ui.js?v=20251216-loading"></script>
    <script src="/static/js/showcase.js?v=20251216-docx"></script>
    <script src="/static/js/tour.js?v=20251217-svg"></script>
    <script src="/static/js/app.js?v=20251216-loading"></script>
</body>
</html>
