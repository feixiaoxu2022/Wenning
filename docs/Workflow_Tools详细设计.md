# CreativeFlow Workflow Tools è¯¦ç»†è®¾è®¡

## æ–‡æ¡£ç›®çš„

æœ¬æ–‡æ¡£å®šä¹‰3ä¸ªæ ¸å¿ƒWorkflow Toolsçš„**å·¥å…·æ¥å£è§„èŒƒ**ã€**å†…éƒ¨æ‰§è¡Œæµç¨‹**ã€**è¿›åº¦åé¦ˆæœºåˆ¶**ã€**å¼‚å¸¸å¤„ç†ç­–ç•¥**ã€‚

---

## 1. UGCåˆ†æå·¥ä½œæµ (ugc_analysis_workflow)

### å·¥å…·æ¥å£å®šä¹‰

```python
{
    "name": "ugc_analysis_workflow",
    "description": "UGCå†…å®¹åˆ†æå®Œæ•´æµç¨‹å·¥å…·ã€‚è‡ªåŠ¨å®Œæˆ:ç¤¾äº¤å¹³å°æ•°æ®é‡‡é›†â†’æƒ…æ„Ÿåˆ†æâ†’ä¸»é¢˜èšç±»â†’Good Caseç­›é€‰â†’æ™ºèƒ½å›å¤ç”Ÿæˆâ†’ExcelæŠ¥å‘Šè¾“å‡ºã€‚é€‚ç”¨åœºæ™¯:åˆ†æå°çº¢ä¹¦/å¾®åš/æŠ–éŸ³è¯„è®ºåŒºç”¨æˆ·åé¦ˆ,è¾“å‡ºè¿è¥å†³ç­–æŠ¥å‘Š",

    "parameters": {
        "url": {
            "type": "string",
            "required": true,
            "description": "ç¤¾äº¤å¹³å°æ´»åŠ¨é“¾æ¥(æ”¯æŒå°çº¢ä¹¦/å¾®åš/æŠ–éŸ³)",
            "example": "https://www.xiaohongshu.com/discovery/item/xxxxx"
        },
        "platform": {
            "type": "enum",
            "required": false,
            "default": "auto_detect",
            "options": ["xiaohongshu", "weibo", "douyin", "auto_detect"],
            "description": "å¹³å°ç±»å‹,é»˜è®¤è‡ªåŠ¨è¯†åˆ«"
        },
        "analysis_depth": {
            "type": "enum",
            "required": false,
            "default": "full",
            "options": ["quick", "full"],
            "description": "quick=ä»…åˆ†æå‰100æ¡(2åˆ†é’Ÿ),full=å…¨é‡åˆ†æ(10-15åˆ†é’Ÿ)"
        },
        "good_case_threshold": {
            "type": "number",
            "required": false,
            "default": 85,
            "range": [0, 100],
            "description": "Good Caseç­›é€‰è¯„åˆ†é˜ˆå€¼,é»˜è®¤85åˆ†"
        },
        "output_format": {
            "type": "enum",
            "required": false,
            "default": "excel",
            "options": ["excel", "json", "both"],
            "description": "è¾“å‡ºæ ¼å¼é€‰æ‹©"
        },
        "include_reply_suggestions": {
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "æ˜¯å¦ç”Ÿæˆæ™ºèƒ½å›å¤å»ºè®®"
        }
    },

    "returns": {
        "status": "success | failed | partial_success",
        "execution_time": "è€—æ—¶(ç§’)",
        "data": {
            "excel_path": "ExcelæŠ¥å‘Šæ–‡ä»¶è·¯å¾„",
            "json_path": "JSONæ•°æ®æ–‡ä»¶è·¯å¾„(å¦‚æœé€‰æ‹©)",
            "summary": {
                "total_comments": 1247,
                "sentiment_distribution": {
                    "positive": {"count": 799, "percentage": "64.1%"},
                    "neutral": {"count": 359, "percentage": "28.8%"},
                    "negative": {"count": 89, "percentage": "7.1%"}
                },
                "top_themes": ["å­¦ç”Ÿå­¦ä¹ è¾…åŠ©(41.9%)", "èŒåœºåŠå…¬(25.5%)"],
                "good_cases_count": 10,
                "alert": "âš ï¸ 89æ¡è´Ÿé¢è¯„è®ºéœ€å…³æ³¨"
            }
        },
        "warnings": ["æ•°æ®é‡‡é›†è€—æ—¶è¾ƒé•¿", "éƒ¨åˆ†è¯„è®ºç¼ºå°‘ç”¨æˆ·å"],
        "stage_logs": "[å„é˜¶æ®µæ‰§è¡Œæ—¥å¿—]"
    }
}
```

### å†…éƒ¨æ‰§è¡Œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           UGCåˆ†æå·¥ä½œæµå†…éƒ¨æ‰§è¡Œé€»è¾‘                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é˜¶æ®µ1: æ•°æ®é‡‡é›† (é¢„è®¡2-5åˆ†é’Ÿ)
â”œâ”€ æ­¥éª¤1.1: è¯†åˆ«å¹³å°ç±»å‹(å¦‚æœæ˜¯auto_detect)
â”‚  â””â”€ è¾“å…¥: URL â†’ è¾“å‡º: platformç±»å‹
â”œâ”€ æ­¥éª¤1.2: è°ƒç”¨WebæŠ“å–Atomic Tool
â”‚  â””â”€ å‚æ•°: {url, platform, pagination: true}
â”‚  â””â”€ è¿”å›: [{id, user, content, likes, time}, ...]
â”œâ”€ æ­¥éª¤1.3: æ•°æ®è´¨é‡æ£€æŸ¥
â”‚  â””â”€ éªŒè¯: è‡³å°‘è·å–>10æ¡æ•°æ®,å¦åˆ™æŠ¥é”™
â””â”€ è¿›åº¦åé¦ˆ: "âœ… æ•°æ®é‡‡é›†å®Œæˆ!å…±æŠ“å–1247æ¡è¯„è®º"

é˜¶æ®µ2: æƒ…æ„Ÿåˆ†æ (é¢„è®¡2-3åˆ†é’Ÿ)
â”œâ”€ æ­¥éª¤2.1: LLMæ‰¹é‡æƒ…æ„Ÿåˆ†æ
â”‚  â””â”€ Prompt: "å¯¹ä»¥ä¸‹è¯„è®ºè¿›è¡Œæƒ…æ„Ÿåˆ†æ..."
â”‚  â””â”€ è¿”å›: [{id, sentiment, confidence, keywords}, ...]
â”œâ”€ æ­¥éª¤2.2: ç»Ÿè®¡æƒ…æ„Ÿåˆ†å¸ƒ
â”‚  â””â”€ è®¡ç®—: æ­£é¢/ä¸­æ€§/è´Ÿé¢å æ¯”
â””â”€ è¿›åº¦åé¦ˆ: "ğŸ“ˆ æƒ…æ„Ÿåˆ†æå®Œæˆ!æ­£é¢64.1% | ä¸­æ€§28.8% | è´Ÿé¢7.1%"

é˜¶æ®µ3: ä¸»é¢˜èšç±» (é¢„è®¡1-2åˆ†é’Ÿ)
â”œâ”€ æ­¥éª¤3.1: LLMä¸»é¢˜èšç±»
â”‚  â””â”€ Prompt: "åŸºäºæƒ…æ„Ÿåˆ†æç»“æœè¿›è¡Œä¸»é¢˜èšç±»..."
â”‚  â””â”€ è¿”å›: [{theme, count, typical_cases, insight}, ...]
â”œâ”€ æ­¥éª¤3.2: æå–Topå…³é”®è¯
â”‚  â””â”€ ç»Ÿè®¡: å…¨å±€é«˜é¢‘è¯Top 20
â””â”€ è¿›åº¦åé¦ˆ: "ğŸ¯ ä¸»é¢˜èšç±»å®Œæˆ!è¯†åˆ«4ä¸ªæ ¸å¿ƒä¸»é¢˜"

é˜¶æ®µ4: Good Caseç­›é€‰ (é¢„è®¡1åˆ†é’Ÿ)
â”œâ”€ æ­¥éª¤4.1: LLMæŒ‰æ ‡å‡†è¯„åˆ†
â”‚  â””â”€ ç­›é€‰æ ‡å‡†: ä¼ æ’­ä»·å€¼(40%) + æƒ…æ„Ÿå¼ºåº¦(30%) + ç¤¾äº¤è¯æ˜(20%) + å®Œæ•´æ€§(10%)
â”‚  â””â”€ å‚æ•°: good_case_threshold(é»˜è®¤85åˆ†)
â”œâ”€ æ­¥éª¤4.2: æ’åºå¹¶é€‰æ‹©Top 10
â”‚  â””â”€ è¾“å‡º: [{rank, score, reason, channel_suggestion}, ...]
â””â”€ è¿›åº¦åé¦ˆ: "ğŸ† Good Caseç­›é€‰å®Œæˆ!Top 1: Aliceå­¦å§(95åˆ†)"

é˜¶æ®µ5: æ™ºèƒ½å›å¤ç”Ÿæˆ (é¢„è®¡2åˆ†é’Ÿ,å¯é€‰)
â”œâ”€ æ­¥éª¤5.1: åˆ†ç±»ç”Ÿæˆå›å¤æ¨¡æ¿
â”‚  â””â”€ æ­£é¢è¯„è®º: 5ä¸ªæ¨¡æ¿(æ„Ÿè°¢+å¼•å¯¼)
â”‚  â””â”€ ä¸­æ€§è¯„è®º: 5ä¸ªæ¨¡æ¿(äº†è§£éœ€æ±‚+å»ºè®®)
â”‚  â””â”€ è´Ÿé¢è¯„è®º: 5ä¸ªæ¨¡æ¿(é“æ­‰+è¡¥å¿+è§£å†³)
â”œâ”€ æ­¥éª¤5.2: å“ç‰Œtoneæ ¡å‡†
â”‚  â””â”€ ç¡®ä¿: äº²å’Œã€ä¸“ä¸šã€æœ‰æ¸©åº¦
â””â”€ è¿›åº¦åé¦ˆ: "ğŸ’¬ å›å¤å»ºè®®ç”Ÿæˆå®Œæˆ!æ­£é¢/ä¸­æ€§/è´Ÿé¢å„5ä¸ªæ¨¡æ¿"
    (å¦‚æœinclude_reply_suggestions=false,è·³è¿‡æ­¤é˜¶æ®µ)

é˜¶æ®µ6: æŠ¥å‘Šç”Ÿæˆä¸è¾“å‡º (é¢„è®¡1-2åˆ†é’Ÿ)
â”œâ”€ æ­¥éª¤6.1: LLMç”ŸæˆPythonä»£ç (openpyxl)
â”‚  â””â”€ ç”Ÿæˆ5ä¸ªSheet: æ˜ç»†/ç»Ÿè®¡/Good Case/å›å¤/æ´å¯Ÿ
â”œâ”€ æ­¥éª¤6.2: è°ƒç”¨ä»£ç æ‰§è¡Œå™¨Atomic Tool
â”‚  â””â”€ æ‰§è¡ŒPythonä»£ç ,ç”ŸæˆExcelæ–‡ä»¶
â”œâ”€ æ­¥éª¤6.3: (å¯é€‰)ç”ŸæˆJSONæ ¼å¼
â”‚  â””â”€ å¦‚æœoutput_formatåŒ…å«json
â””â”€ è¿›åº¦åé¦ˆ: "ğŸ“Š ExcelæŠ¥å‘Šå·²ç”Ÿæˆ:[æ–‡ä»¶è·¯å¾„]"

æ€»è€—æ—¶: quickæ¨¡å¼2-3åˆ†é’Ÿ | fullæ¨¡å¼10-15åˆ†é’Ÿ
```

### è¿›åº¦åé¦ˆæœºåˆ¶

**è®¾è®¡åŸåˆ™**: é•¿æ—¶é—´æ‰§è¡Œçš„Workflowå¿…é¡»æä¾›**é˜¶æ®µæ€§è¿›åº¦åé¦ˆ**,é¿å…ç”¨æˆ·ç„¦è™‘

**åé¦ˆæ ¼å¼**:

```json
// æ¯ä¸ªé˜¶æ®µå¼€å§‹æ—¶
{
    "type": "stage_start",
    "stage": 2,
    "total_stages": 6,
    "stage_name": "æƒ…æ„Ÿåˆ†æ",
    "estimated_time": "2-3åˆ†é’Ÿ",
    "message": "æ­£åœ¨è¿›è¡Œæƒ…æ„Ÿåˆ†æ..."
}

// æ¯ä¸ªé˜¶æ®µå®Œæˆæ—¶
{
    "type": "stage_complete",
    "stage": 2,
    "total_stages": 6,
    "stage_name": "æƒ…æ„Ÿåˆ†æ",
    "actual_time": "2.3åˆ†é’Ÿ",
    "message": "ğŸ“ˆ æƒ…æ„Ÿåˆ†æå®Œæˆ!æ­£é¢64.1% | ä¸­æ€§28.8% | è´Ÿé¢7.1%",
    "key_data": {
        "positive": "64.1%",
        "neutral": "28.8%",
        "negative": "7.1%"
    }
}

// æ•´ä½“è¿›åº¦(å¯é€‰)
{
    "type": "progress_update",
    "progress": 0.33,  // 33%
    "message": "å·²å®Œæˆ 2/6 æ­¥éª¤"
}
```

**ç”¨æˆ·çœ‹åˆ°çš„ä½“éªŒ**:

```
User: "å¸®æˆ‘åˆ†æè¿™ä¸ªæ´»åŠ¨è¯„è®º: [é“¾æ¥]"

Agent:
å¥½çš„,æˆ‘æ¥å¸®ä½ å®ŒæˆUGCåˆ†æã€‚é¢„è®¡è€—æ—¶10-15åˆ†é’Ÿ,å…±6ä¸ªæ­¥éª¤:
1ï¸âƒ£ æ•°æ®é‡‡é›† â†’ 2ï¸âƒ£ æƒ…æ„Ÿåˆ†æ â†’ 3ï¸âƒ£ ä¸»é¢˜èšç±» â†’ 4ï¸âƒ£ Good Caseç­›é€‰ â†’ 5ï¸âƒ£ å›å¤ç”Ÿæˆ â†’ 6ï¸âƒ£ æŠ¥å‘Šè¾“å‡º

[1/6] æ­£åœ¨é‡‡é›†å°çº¢ä¹¦è¯„è®ºæ•°æ®...
âœ… æ•°æ®é‡‡é›†å®Œæˆ!å…±æŠ“å–1247æ¡è¯„è®º (è€—æ—¶4.2åˆ†é’Ÿ)

[2/6] æ­£åœ¨è¿›è¡Œæƒ…æ„Ÿåˆ†æ...
ğŸ“ˆ æƒ…æ„Ÿåˆ†æå®Œæˆ!æ­£é¢64.1% | ä¸­æ€§28.8% | è´Ÿé¢7.1% (è€—æ—¶2.3åˆ†é’Ÿ)

[3/6] æ­£åœ¨è¿›è¡Œä¸»é¢˜èšç±»...
ğŸ¯ ä¸»é¢˜èšç±»å®Œæˆ!è¯†åˆ«4ä¸ªæ ¸å¿ƒä¸»é¢˜ (è€—æ—¶1.8åˆ†é’Ÿ)

[4/6] æ­£åœ¨ç­›é€‰Good Case...
ğŸ† Good Caseç­›é€‰å®Œæˆ!Top 1: Aliceå­¦å§(95åˆ†) (è€—æ—¶1.1åˆ†é’Ÿ)

[5/6] æ­£åœ¨ç”Ÿæˆæ™ºèƒ½å›å¤å»ºè®®...
ğŸ’¬ å›å¤å»ºè®®ç”Ÿæˆå®Œæˆ!æ­£é¢/ä¸­æ€§/è´Ÿé¢å„5ä¸ªæ¨¡æ¿ (è€—æ—¶2.0åˆ†é’Ÿ)

[6/6] æ­£åœ¨ç”ŸæˆExcelæŠ¥å‘Š...
ğŸ“Š ExcelæŠ¥å‘Šå·²ç”Ÿæˆ:/tmp/UGCåˆ†ææŠ¥å‘Š_20240905.xlsx (è€—æ—¶1.5åˆ†é’Ÿ)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… åˆ†æä»»åŠ¡å…¨éƒ¨å®Œæˆ!æ€»è€—æ—¶:12.9åˆ†é’Ÿ

ğŸ“¦ äº¤ä»˜ç‰©:
â€¢ ExcelæŠ¥å‘Š(5ä¸ªSheet): [ç‚¹å‡»ä¸‹è½½]
â€¢ æ ¸å¿ƒæ•°æ®æ‘˜è¦: æ­£é¢64.1% | NPS+57
â€¢ âš ï¸ éœ€å…³æ³¨: 89æ¡è´Ÿé¢è¯„è®º(å·²æä¾›è¯æœ¯)

ğŸ’¡ ä¸‹ä¸€æ­¥å»ºè®®:
1. æœ¬å‘¨ä¼˜å…ˆå›å¤è´Ÿé¢è¯„è®º
2. å‘å¸ƒ10ä¸ªGood Caseåˆ°å®˜æ–¹å°çº¢ä¹¦
```

### å¼‚å¸¸å¤„ç†ç­–ç•¥

```python
# å¼‚å¸¸åˆ†ç±»ä¸å¤„ç†

class WorkflowException:
    """å·¥ä½œæµå¼‚å¸¸å¤„ç†"""

    # å¯æ¢å¤é”™è¯¯: è‡ªåŠ¨é‡è¯•
    RETRYABLE_ERRORS = {
        "network_timeout": {
            "max_retries": 3,
            "retry_interval": [5, 10, 20],  # æŒ‡æ•°é€€é¿
            "fallback": "é™çº§åˆ°quickæ¨¡å¼"
        },
        "rate_limit": {
            "max_retries": 2,
            "retry_interval": [60, 120],
            "fallback": "æš‚åœ30ç§’åç»§ç»­"
        },
        "llm_service_error": {
            "max_retries": 2,
            "retry_interval": [10, 20],
            "fallback": "åˆ‡æ¢å¤‡ç”¨æ¨¡å‹"
        }
    }

    # éƒ¨åˆ†å¤±è´¥: é™çº§æ‰§è¡Œ
    DEGRADABLE_STAGES = {
        "stage_5_reply_generation": {
            "critical": false,  # éå…³é”®æ­¥éª¤
            "on_failure": "è·³è¿‡æ­¤æ­¥éª¤,ç»§ç»­åç»­æµç¨‹",
            "user_message": "âš ï¸ å›å¤å»ºè®®ç”Ÿæˆå¤±è´¥,å·²è·³è¿‡ã€‚å…¶ä»–åŠŸèƒ½æ­£å¸¸å®Œæˆ"
        },
        "stage_3_clustering": {
            "critical": false,
            "on_failure": "ä½¿ç”¨åŸºç¡€åˆ†ç±»(ä»…æƒ…æ„Ÿç»´åº¦)",
            "user_message": "âš ï¸ ä¸»é¢˜èšç±»é™çº§ä¸ºæƒ…æ„Ÿåˆ†ç±»"
        }
    }

    # è‡´å‘½é”™è¯¯: ç«‹å³åœæ­¢
    FATAL_ERRORS = {
        "data_collection_failed": {
            "condition": "è·å–è¯„è®ºæ•°<10æ¡",
            "action": "ç«‹å³ä¸­æ­¢workflow",
            "user_message": "âŒ æ•°æ®é‡‡é›†å¤±è´¥,æ— æ³•ç»§ç»­åˆ†æã€‚è¯·æ£€æŸ¥é“¾æ¥æ˜¯å¦æœ‰æ•ˆæˆ–ç¨åé‡è¯•",
            "return_partial_data": false
        },
        "invalid_url": {
            "condition": "URLæ ¼å¼é”™è¯¯æˆ–ä¸æ”¯æŒçš„å¹³å°",
            "action": "ç«‹å³ä¸­æ­¢",
            "user_message": "âŒ æ— æ•ˆé“¾æ¥ã€‚å½“å‰ä»…æ”¯æŒå°çº¢ä¹¦/å¾®åš/æŠ–éŸ³å¹³å°",
            "suggest_action": "è¯·æä¾›æ­£ç¡®çš„æ´»åŠ¨é“¾æ¥"
        }
    }

    # äººå·¥ä»‹å…¥åœºæ™¯
    HUMAN_INTERVENTION_REQUIRED = {
        "large_dataset_warning": {
            "condition": "è¯„è®ºæ•°>5000æ¡",
            "action": "æš‚åœå¹¶è¯¢é—®ç”¨æˆ·",
            "message": "âš ï¸ æ£€æµ‹åˆ°5000+æ¡è¯„è®º,é¢„è®¡è€—æ—¶>30åˆ†é’Ÿã€‚æ˜¯å¦ç»§ç»­å…¨é‡åˆ†æ?",
            "options": ["ç»§ç»­fullæ¨¡å¼", "åˆ‡æ¢quickæ¨¡å¼(ä»…åˆ†æå‰1000æ¡)", "å–æ¶ˆ"]
        },
        "sensitive_content_detected": {
            "condition": "è´Ÿé¢è¯„è®ºå æ¯”>30%",
            "action": "æ ‡è®°å¹¶æé†’",
            "message": "âš ï¸ æ£€æµ‹åˆ°é«˜æ¯”ä¾‹è´Ÿé¢è¯„è®º(35%),å¯èƒ½å­˜åœ¨èˆ†æƒ…é£é™©ã€‚å»ºè®®äººå·¥ä»‹å…¥å®¡æ ¸"
        }
    }
```

**å¼‚å¸¸å¤„ç†ç¤ºä¾‹æµç¨‹**:

```
åœºæ™¯: é˜¶æ®µ1æ•°æ®é‡‡é›†æ—¶å‘ç”Ÿç½‘ç»œè¶…æ—¶

[1/6] æ­£åœ¨é‡‡é›†å°çº¢ä¹¦è¯„è®ºæ•°æ®...
âš ï¸ ç½‘ç»œè¶…æ—¶,æ­£åœ¨é‡è¯•(1/3)...
âš ï¸ ç½‘ç»œè¶…æ—¶,æ­£åœ¨é‡è¯•(2/3)...
âœ… é‡è¯•æˆåŠŸ!å…±æŠ“å–1247æ¡è¯„è®º

åœºæ™¯: é˜¶æ®µ5å›å¤ç”Ÿæˆå¤±è´¥(éå…³é”®)

[5/6] æ­£åœ¨ç”Ÿæˆæ™ºèƒ½å›å¤å»ºè®®...
âŒ å›å¤ç”Ÿæˆå¤±è´¥(LLMæœåŠ¡é”™è¯¯),å·²è·³è¿‡æ­¤æ­¥éª¤
â„¹ï¸ å…¶ä»–åŠŸèƒ½æ­£å¸¸,ç»§ç»­æ‰§è¡Œ...

[6/6] æ­£åœ¨ç”ŸæˆExcelæŠ¥å‘Š...
ğŸ“Š ExcelæŠ¥å‘Šå·²ç”Ÿæˆ(âš ï¸ ä¸å«å›å¤å»ºè®®Sheet)

åœºæ™¯: é˜¶æ®µ1æ•°æ®é‡‡é›†å½»åº•å¤±è´¥(è‡´å‘½é”™è¯¯)

[1/6] æ­£åœ¨é‡‡é›†å°çº¢ä¹¦è¯„è®ºæ•°æ®...
âš ï¸ ç½‘ç»œè¶…æ—¶,æ­£åœ¨é‡è¯•(1/3)...
âš ï¸ ç½‘ç»œè¶…æ—¶,æ­£åœ¨é‡è¯•(2/3)...
âš ï¸ ç½‘ç»œè¶…æ—¶,æ­£åœ¨é‡è¯•(3/3)...
âŒ æ•°æ®é‡‡é›†å¤±è´¥,workflowå·²ä¸­æ­¢

åŸå› : å¤šæ¬¡é‡è¯•åä»æ— æ³•è®¿é—®é“¾æ¥
å»ºè®®:
1. æ£€æŸ¥é“¾æ¥æ˜¯å¦æœ‰æ•ˆ
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. ç¨åé‡è¯•æˆ–è”ç³»æŠ€æœ¯æ”¯æŒ
```

---

## 2. æ´»åŠ¨ç­–åˆ’å·¥ä½œæµ (campaign_planning_workflow)

### å·¥å…·æ¥å£å®šä¹‰

```python
{
    "name": "campaign_planning_workflow",
    "description": "è¥é”€æ´»åŠ¨ç­–åˆ’å®Œæ•´æµç¨‹å·¥å…·ã€‚è‡ªåŠ¨å®Œæˆ:é€‰é¢˜è°ƒç ”(ç«å“åˆ†æ+çƒ­ç‚¹è¿½è¸ª)â†’æ´»åŠ¨æ–¹æ¡ˆè®¾è®¡â†’PRDæ–‡æ¡£ç”Ÿæˆâ†’ç‰©æ–™åˆ¶ä½œâ†’ä¼ æ’­ç­–ç•¥å»ºè®®ã€‚é€‚ç”¨åœºæ™¯:èŠ‚æ—¥è¥é”€ã€æ–°å“å‘å¸ƒã€ç”¨æˆ·å¢é•¿æ´»åŠ¨",

    "parameters": {
        "campaign_goal": {
            "type": "enum",
            "required": true,
            "options": ["æ‹‰æ–°", "ä¿ƒæ´»", "è½¬åŒ–", "å“ç‰Œæ›å…‰", "ç”¨æˆ·ç•™å­˜"],
            "description": "æ´»åŠ¨æ ¸å¿ƒç›®æ ‡"
        },
        "target_audience": {
            "type": "string",
            "required": true,
            "description": "ç›®æ ‡ç”¨æˆ·ç¾¤ä½“",
            "example": "18-25å²å¤§å­¦ç”Ÿ"
        },
        "budget": {
            "type": "number",
            "required": true,
            "unit": "å…ƒ",
            "description": "æ´»åŠ¨é¢„ç®—(å«å¥–å“+æŠ•æ”¾)",
            "example": 50000
        },
        "deadline": {
            "type": "date",
            "required": true,
            "format": "YYYY-MM-DD",
            "description": "æ´»åŠ¨ä¸Šçº¿æ—¶é—´"
        },
        "theme": {
            "type": "string",
            "required": false,
            "description": "æ´»åŠ¨ä¸»é¢˜/èŠ‚æ—¥(å¯é€‰,å¦‚'åŒåä¸€'/'å¼€å­¦å­£')",
            "example": "å¼€å­¦å­£"
        },
        "competitor_urls": {
            "type": "array",
            "required": false,
            "items": "string",
            "description": "ç«å“å‚è€ƒé“¾æ¥(ç”¨äºè°ƒç ”é˜¶æ®µ)",
            "example": ["https://...", "https://..."]
        },
        "output_materials": {
            "type": "array",
            "required": false,
            "default": ["æ–¹æ¡ˆæ–‡æ¡£", "PRD", "æµ·æŠ¥"],
            "options": ["æ–¹æ¡ˆæ–‡æ¡£", "PRD", "æµ·æŠ¥", "æ¨é€æ–‡æ¡ˆ", "è§†é¢‘è„šæœ¬"],
            "description": "éœ€è¦è¾“å‡ºçš„ç‰©æ–™ç±»å‹"
        }
    },

    "returns": {
        "status": "success | failed | partial_success",
        "execution_time": "è€—æ—¶(ç§’)",
        "data": {
            "campaign_plan": {
                "title": "æ´»åŠ¨åç§°",
                "solutions": [
                    {
                        "rank": 1,
                        "name": "æ–¹æ¡ˆA:å¼€å­¦ç¦åˆ©å¤§æ”¾é€",
                        "score": 92,
                        "brief": "ç»“åˆå¼€å­¦ç—›ç‚¹,é€å­¦ä¹ å·¥å…·+ä¼šå‘˜",
                        "details": "[å®Œæ•´æ–¹æ¡ˆæ–‡æ¡£è·¯å¾„]"
                    }
                ]
            },
            "prd_path": "PRDæ–‡æ¡£è·¯å¾„",
            "materials": {
                "posters": ["æµ·æŠ¥1è·¯å¾„", "æµ·æŠ¥2è·¯å¾„"],
                "copywriting": ["æ¨é€æ–‡æ¡ˆè·¯å¾„"],
                "video_script": "è§†é¢‘è„šæœ¬è·¯å¾„"
            },
            "channel_strategy": {
                "recommended_channels": ["å°çº¢ä¹¦", "å¾®åš", "æœ‹å‹åœˆå¹¿å‘Š"],
                "budget_allocation": {"å°çº¢ä¹¦": 20000, "å¾®åš": 15000, "æœ‹å‹åœˆ": 15000},
                "timeline": "[ä¼ æ’­æ—¶é—´è¡¨]"
            }
        }
    }
}
```

### å†…éƒ¨æ‰§è¡Œæµç¨‹(ç®€è¿°)

```
é˜¶æ®µ1: é€‰é¢˜è°ƒç ” (3-5åˆ†é’Ÿ)
â”œâ”€ ç«å“æ´»åŠ¨æŠ“å–(WebæŠ“å–)
â”œâ”€ çƒ­ç‚¹è¯é¢˜è¿½è¸ª(APIè°ƒç”¨æˆ–WebæŠ“å–)
â””â”€ å†å²æ´»åŠ¨æ•ˆæœåˆ†æ(å¦‚æœ‰æ•°æ®)

é˜¶æ®µ2: æ–¹æ¡ˆè®¾è®¡ (5-8åˆ†é’Ÿ)
â”œâ”€ LLMç”Ÿæˆ3-5ä¸ªæ–¹æ¡ˆæ¡†æ¶
â”œâ”€ æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºè·¯å¾„
â””â”€ é¢„ä¼°æ•°æ®æŒ‡æ ‡(DAU/è½¬åŒ–ç‡)

é˜¶æ®µ3: PRDç”Ÿæˆ (2-3åˆ†é’Ÿ)
â”œâ”€ ç»“æ„åŒ–PRDæ–‡æ¡£(åŠŸèƒ½/äº¤äº’/éªŒæ”¶)
â””â”€ è®¾è®¡Brief(è§†è§‰é£æ ¼/æ–‡æ¡ˆéœ€æ±‚)

é˜¶æ®µ4: ç‰©æ–™åˆ¶ä½œ (5-10åˆ†é’Ÿ)
â”œâ”€ æµ·æŠ¥ç”Ÿæˆ(è°ƒç”¨Visionç”Ÿæˆæˆ–æ¨¡æ¿)
â”œâ”€ æ¨é€æ–‡æ¡ˆ(LLMç”Ÿæˆå¤šç‰ˆæœ¬)
â””â”€ è§†é¢‘è„šæœ¬(å¦‚éœ€è¦)

é˜¶æ®µ5: ä¼ æ’­ç­–ç•¥ (3-5åˆ†é’Ÿ)
â”œâ”€ æ¸ é“é€‰æ‹©å»ºè®®(åŸºäºç›®æ ‡äººç¾¤)
â”œâ”€ é¢„ç®—åˆ†é…æ–¹æ¡ˆ
â””â”€ æŠ•æ”¾æ—¶é—´è¡¨

æ€»è€—æ—¶: 20-30åˆ†é’Ÿ
```

---

## 3. æ•°æ®æŠ¥å‘Šå·¥ä½œæµ (data_report_workflow)

### å·¥å…·æ¥å£å®šä¹‰

```python
{
    "name": "data_report_workflow",
    "description": "æ•°æ®è¿è¥æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆå·¥å…·ã€‚æ”¯æŒä»å¤šæ•°æ®æºæå–æ•°æ®â†’æ¸…æ´—åˆ†æâ†’å¯è§†åŒ–â†’ç”ŸæˆPPT/PDFæŠ¥å‘Šã€‚é€‚ç”¨åœºæ™¯:æ—¥æŠ¥/å‘¨æŠ¥/æœˆæŠ¥,äº§å“æ•°æ®åˆ†æ,A/Bæµ‹è¯•æŠ¥å‘Š",

    "parameters": {
        "report_type": {
            "type": "enum",
            "required": true,
            "options": ["æ—¥æŠ¥", "å‘¨æŠ¥", "æœˆæŠ¥", "ä¸“é¡¹åˆ†æ"],
            "description": "æŠ¥å‘Šç±»å‹"
        },
        "data_sources": {
            "type": "array",
            "required": true,
            "items": {
                "type": "object",
                "properties": {
                    "source_type": "enum [database, api, csv, excel]",
                    "connection_string": "string",
                    "query": "string (SQLæˆ–APIå‚æ•°)"
                }
            },
            "description": "æ•°æ®æºé…ç½®"
        },
        "metrics": {
            "type": "array",
            "required": true,
            "items": "string",
            "description": "å…³æ³¨æŒ‡æ ‡",
            "example": ["DAU", "ç•™å­˜ç‡", "è½¬åŒ–ç‡", "GMV"]
        },
        "output_format": {
            "type": "enum",
            "required": false,
            "default": "pptx",
            "options": ["pptx", "pdf", "excel", "all"],
            "description": "è¾“å‡ºæ ¼å¼"
        },
        "include_insights": {
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "æ˜¯å¦ç”ŸæˆAIæ´å¯Ÿå’Œå»ºè®®"
        }
    },

    "returns": {
        "status": "success | failed",
        "execution_time": "è€—æ—¶(ç§’)",
        "data": {
            "report_path": "æŠ¥å‘Šæ–‡ä»¶è·¯å¾„",
            "key_findings": [
                "DAUç¯æ¯”å¢é•¿12%,ä¸»è¦æ¥è‡ªæ–°ç”¨æˆ·",
                "ç•™å­˜ç‡ä¸‹é™3%,éœ€å…³æ³¨"
            ],
            "alerts": ["âš ï¸ è½¬åŒ–ç‡å¼‚å¸¸ä¸‹é™,å»ºè®®æ’æŸ¥"]
        }
    }
}
```

### å†…éƒ¨æ‰§è¡Œæµç¨‹(ç®€è¿°)

```
é˜¶æ®µ1: æ•°æ®æå– (2-5åˆ†é’Ÿ)
â”œâ”€ è¿æ¥å„æ•°æ®æº
â”œâ”€ æ‰§è¡ŒæŸ¥è¯¢è¯­å¥
â””â”€ æ•°æ®åˆå¹¶ä¸æ¸…æ´—

é˜¶æ®µ2: æ•°æ®åˆ†æ (3-5åˆ†é’Ÿ)
â”œâ”€ ç»Ÿè®¡åˆ†æ(pandasä»£ç ç”Ÿæˆ)
â”œâ”€ è¶‹åŠ¿æ£€æµ‹
â””â”€ å¼‚å¸¸è¯†åˆ«

é˜¶æ®µ3: å¯è§†åŒ– (3-5åˆ†é’Ÿ)
â”œâ”€ å›¾è¡¨ç”Ÿæˆ(matplotlib/plotlyä»£ç )
â”œâ”€ æ ·å¼ç¾åŒ–
â””â”€ å›¾è¡¨å¯¼å‡º

é˜¶æ®µ4: æŠ¥å‘Šç”Ÿæˆ (2-3åˆ†é’Ÿ)
â”œâ”€ PPTç»“æ„ç”Ÿæˆ(python-pptxä»£ç )
â”œâ”€ å†…å®¹å¡«å……
â””â”€ AIæ´å¯Ÿæ’°å†™(LLMç”Ÿæˆ)

æ€»è€—æ—¶: 10-18åˆ†é’Ÿ
```

---

## é€šç”¨è®¾è®¡è§„èŒƒ

### 1. æ‰€æœ‰Workflow Toolå¿…é¡»æä¾›çš„èƒ½åŠ›

- âœ… **å‚æ•°æ ¡éªŒ**: å¯åŠ¨å‰éªŒè¯æ‰€æœ‰å¿…éœ€å‚æ•°
- âœ… **è¿›åº¦åé¦ˆ**: æ¯ä¸ªé˜¶æ®µå¼€å§‹/å®Œæˆæ—¶åé¦ˆ
- âœ… **å¼‚å¸¸å¤„ç†**: åŒºåˆ†å¯é‡è¯•/é™çº§/è‡´å‘½é”™è¯¯
- âœ… **éƒ¨åˆ†æˆåŠŸæ”¯æŒ**: éå…³é”®æ­¥éª¤å¤±è´¥ä¸å½±å“æ•´ä½“
- âœ… **äººå·¥ä»‹å…¥æ¥å£**: å…³é”®å†³ç­–ç‚¹æ”¯æŒæš‚åœè¯¢é—®
- âœ… **æ‰§è¡Œæ—¥å¿—**: è®°å½•å®Œæ•´æ‰§è¡Œè¿‡ç¨‹ä¾›è°ƒè¯•

### 2. ä»£ç å®ç°å»ºè®®

```python
# Workflow ToolåŸºç±»

class WorkflowTool:
    def __init__(self, name, stages):
        self.name = name
        self.stages = stages  # é˜¶æ®µåˆ—è¡¨
        self.current_stage = 0
        self.execution_log = []

    def execute(self, params):
        """æ‰§è¡Œworkflow"""
        # 1. å‚æ•°æ ¡éªŒ
        self.validate_params(params)

        # 2. é€é˜¶æ®µæ‰§è¡Œ
        for stage in self.stages:
            try:
                # 2.1 åé¦ˆé˜¶æ®µå¼€å§‹
                self.notify_stage_start(stage)

                # 2.2 æ‰§è¡Œé˜¶æ®µé€»è¾‘
                result = stage.execute(params)

                # 2.3 åé¦ˆé˜¶æ®µå®Œæˆ
                self.notify_stage_complete(stage, result)

                # 2.4 è®°å½•æ—¥å¿—
                self.log_stage(stage, result)

            except RetryableError as e:
                # å¯é‡è¯•é”™è¯¯
                result = self.retry_stage(stage, max_retries=3)

            except DegradableError as e:
                # å¯é™çº§é”™è¯¯
                if stage.critical:
                    raise  # å…³é”®æ­¥éª¤å¿…é¡»æˆåŠŸ
                else:
                    self.notify_stage_degraded(stage, e)
                    continue  # è·³è¿‡éå…³é”®æ­¥éª¤

            except FatalError as e:
                # è‡´å‘½é”™è¯¯
                self.notify_workflow_failed(e)
                return self.build_error_response(e)

        # 3. è¿”å›æœ€ç»ˆç»“æœ
        return self.build_success_response()

    def notify_stage_start(self, stage):
        """å‘ç”¨æˆ·åé¦ˆé˜¶æ®µå¼€å§‹"""
        message = {
            "type": "stage_start",
            "stage": stage.index,
            "total_stages": len(self.stages),
            "stage_name": stage.name,
            "estimated_time": stage.estimated_time
        }
        send_to_user(message)

    # ... å…¶ä»–æ–¹æ³•
```

---

## ä¸‹ä¸€æ­¥å·¥ä½œ

1. âœ… å·²å®Œæˆ: 3ä¸ªWorkflow Toolçš„æ¥å£è®¾è®¡
2. â³ å¾…å®Œæˆ: å®ç°å…·ä½“çš„Pythonä»£ç 
3. â³ å¾…å®Œæˆ: ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
4. â³ å¾…å®Œæˆ: æ›´æ–°UGCåˆ†æè½¨è¿¹æ–‡æ¡£,æ ‡æ³¨Workflow Toolè°ƒç”¨
