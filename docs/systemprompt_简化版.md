# Creative Agent System Prompt 结构概览

> **角色定位**: Wenning - 专业的内容生产助手

---

## 📋 Prompt 整体结构

```
1. 环境信息
   └─ 当前时间(北京时间)

2. 全局约束规则
   ├─ 文件处理规范
   │  ├─ 文件保存路径(禁止绝对/相对路径)
   │  ├─ 用户回复规范(不暴露服务器路径)
   │  └─ 允许的输出类型(.png/.xlsx/.html/.mp4)
   │
   ├─ 代码执行环境
   │  ├─ Python 3.x + 预装库列表
   │  ├─ 禁止的库和操作
   │  └─ 代码编写原则
   │
   └─ 任务结束条件
      └─ 何时返回final answer vs 继续迭代

3. 常见任务类型SOP(6大类)
   ├─ 类型1: 信息检索与整理
   ├─ 类型2: 数据分析与可视化
   ├─ 类型3: 创意生成(图片/卡片)
   ├─ 类型3.5: 视频与动画生成
   ├─ 类型4: HTML/网页截图与转换
   ├─ 类型5: 代码执行与计算
   └─ 类型6: 资源采集与索引生成

4. 质量标准
   └─ 好的回答 vs 应避免的问题
```

---

## 🔍 核心设计理念

### 1️⃣ 安全约束前置
```
文件处理规范
├─ ✅ 简单文件名: report.xlsx
├─ ❌ 绝对路径: /tmp/file.png
└─ ❌ 相对路径: ./output/file.xlsx

目的: 保护服务器安全、确保文件可访问
```

### 2️⃣ 环境能力明确
```
代码执行环境
├─ 已安装库(可用): pandas, PIL, matplotlib, moviepy, playwright...
├─ 禁止的库: subprocess, os.system, 第三方未安装库
└─ 原则: 遇到ImportError立即调整,使用已安装库替代
```

### 3️⃣ 任务流程标准化
```
6大任务类型SOP
每个SOP包含:
├─ 适用场景
├─ 标准流程(3-5步)
├─ 输出格式模板
└─ 技术要点/代码示例
```

### 4️⃣ 质量标准可检查
```
好的回答
├─ ✅ 基于真实数据,不编造
├─ ✅ 结构清晰,Markdown格式
├─ ✅ 提供洞察和建议
└─ ✅ 文件已生成并确认

应避免
├─ ❌ 未使用工具就回答实时问题
├─ ❌ 暴露服务器路径信息
└─ ❌ 生成失败不重试
```

---

## 💡 关键设计亮点

| 设计点 | 说明 | 举例 |
| ------ | ---- | ---- |
| **安全边界清晰** | 禁止路径操作、系统调用、危险命令 | 禁止使用绝对路径、subprocess |
| **能力约束明确** | 明确可用/禁用的库和操作 | 已安装pandas但禁用os.system |
| **流程可复制** | 6大任务类型都有标准SOP | 每个SOP包含场景-流程-输出 |
| **质量可评测** | 明确"好的回答"的标准 | 不编造、有洞察、文件已生成 |
| **错误可恢复** | 强调重试和替代方案 | ImportError时调整代码 |

---

## 📊 6大任务类型快速参考

| 类型 | 场景 | 核心步骤 | 输出 |
| ---- | ---- | -------- | ---- |
| **信息检索** | 搜索热点、查资料 | web_search → 整合 → 结构化呈现 | Markdown报告 |
| **数据分析** | UGC分析、数据统计 | 收集数据 → 分析 → 生成Excel/图表 | .xlsx + 洞察 |
| **创意生成** | 图片、卡片、设计 | 获取参考 → PIL/matplotlib生成 | .png/.jpg |
| **视频动画** | 动画、可视化视频 | 收集素材 → moviepy/matplotlib生成 | .mp4 |
| **网页截图** | HTML转图、截图 | playwright无头浏览器 → 截图 | .png/.pdf |
| **资源采集** | 批量收集、索引 | 搜索 → 抓取 → 下载 → 生成索引 | 资源 + index.html |

---

## 🎯 Prompt设计哲学

```
明确边界 + 标准化流程 + 可评测标准
    ↓
让Agent在安全范围内高效完成任务
    ↓
减少试错、提高质量、便于评测
```

---

*本文档是 `/docs/systemprompt.md` 的精简版,保留核心结构,便于PPT展示*
