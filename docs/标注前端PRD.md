# CreativeFlow 标注前端 PRD

## 1. 核心功能

一个单页Web应用,用于对比两个模型的执行结果并进行标注。

## 2. 页面结构

```
┌─────────────────────────────────────────────────────────────┐
│  Header: CreativeFlow Annotation                           │
│  [评测列表 ▼] [已标注 12 / 待标注 5]                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────┬─────────────────────┐             │
│  │  Model A            │  Model B            │             │
│  │  ernie-5.0          │  gpt-5              │             │
│  ├─────────────────────┼─────────────────────┤             │
│  │  【对话历史】        │  【对话历史】        │             │
│  │  [展开/折叠]        │  [展开/折叠]        │             │
│  │                     │                     │             │
│  │  User: ...          │  User: ...          │             │
│  │  Assistant: ...     │  Assistant: ...     │ ◄─ 滚动区域
│  │  Tool: web_search   │  Tool: web_search   │             │
│  │  ...                │  ...                │             │
│  │                     │                     │             │
│  ├─────────────────────┼─────────────────────┤             │
│  │  【生成文件】        │  【生成文件】        │             │
│  │  ☑ icon.xlsx (2个) │  ☑ report.html (3个)│             │
│  │  [预览] [下载]      │  [预览] [下载]      │             │
│  │                     │                     │             │
│  │  [文件预览区域]     │  [文件预览区域]     │             │
│  └─────────────────────┴─────────────────────┘             │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │  【标注区】                                            │ │
│  │  ○ Model A 更好                                        │ │
│  │  ○ Model B 更好                                        │ │
│  │  ○ 不相上下                                            │ │
│  │                                                        │ │
│  │  理由: [___________________________________________]   │ │
│  │        [                                           ]   │ │
│  │                                                        │ │
│  │  标注人: [____]  [提交标注]  [上一个] [下一个]          │ │
│  └───────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 3. 详细功能

### 3.1 Header区域

- **评测选择下拉框**: 列出所有evaluation结果
  - 格式: `EVAL_ICON_COLLECTION_TECH (待标注)`
  - 已标注的显示: `EVAL_ICON_COLLECTION_TECH (✓ 已标注)`
- **状态统计**: 显示已标注/待标注数量
- **快捷导航**: [上一个] [下一个] 按钮快速切换

### 3.2 对比区域 (左右两栏)

**每栏包含**:

#### A. 模型信息卡片

```
┌─────────────────────────────┐
│ Model A: ernie-5.0          │
│ 状态: success               │
│ 文件数: 2                   │
│ 执行时间: 2025-11-28 13:37  │
└─────────────────────────────┘
```

#### B. 对话历史

- 可折叠的对话记录
- 按role分颜色:
  - User: 蓝色背景
  - Assistant: 灰色背景
  - Tool: 黄色背景
- 显示时间戳
- 长内容自动折叠,点击展开

#### C. 生成文件列表

```
文件列表 (2个):
☑ icon_sources.xlsx (10KB)  [预览] [下载]
☑ icons_index.html (12KB)   [预览] [下载]
```

#### D. 文件预览区

- **Excel**: 渲染为HTML表格
- **HTML**: iframe嵌入
- **图片**: 直接显示
- **其他**: 显示文件信息,提供下载

### 3.3 标注表单

**必填项**:

- Winner选择 (Radio):
  - `model_a` - Model A 更好
  - `model_b` - Model B 更好
  - `tie` - 不相上下
- Reason (Textarea):
  - 占位符: "请详细说明你的判断理由..."
  - 最少30字
- 标注人 (Input):
  - 占位符: "你的名字"

**操作按钮**:

- 
- [上一个] / [下一个]: 导航
- 

## 4. 数据流

### 4.1 加载评测列表

```
GET /api/annotations/list
→ [
    {
      "result_id": "EVAL_ICON_COLLECTION_TECH_result",
      "sample_id": "EVAL_ICON_COLLECTION_TECH",
      "is_annotated": false,
      "created_at": "..."
    }
  ]
```

### 4.2 加载评测详情

```
GET /api/annotations/{result_id}
→ {
    "sample": {...},
    "model_a": {
      "model_name": "ernie-5.0-thinking-preview",
      "conversation_history": [...],
      "files": [...]
    },
    "model_b": {
      "model_name": "gpt-5",
      "conversation_history": [...],
      "files": [...]
    },
    "check_results": {...},
    "human_annotation": null  // 如果已标注则有值
  }
```

### 4.3 提交标注

```
POST /api/annotations/{result_id}
{
  "winner": "model_a",
  "reason": "Model A生成的文件组织更清晰...",
  "annotator": "张三"
}
→ { "success": true }
```


[提交标注]: 提交到后端,自动跳转下一个
[清空]: 清空表单
